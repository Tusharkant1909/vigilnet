import requests
from bs4 import BeautifulSoup
import socket

def scan_vulnerability(target):
    results = {
        'open_ports': [],
        'vulnerabilities': [],
        'server_info': None
    }
    
    # Check for open ports
    common_ports = [21, 22, 80, 443, 8080]
    for port in common_ports:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(1)
        result = sock.connect_ex((target, port))
        if result == 0:
            results['open_ports'].append(port)
        sock.close()
    
    # Get server information
    try:
        response = requests.get(f"http://{target}", timeout=5)
        results['server_info'] = response.headers.get('Server', 'Unknown')
        
        # Simple XSS check
        if '<script>' in response.text.lower():
            results['vulnerabilities'].append('Potential XSS vulnerability detected')
            
    except requests.RequestException:
        pass
    
    return results